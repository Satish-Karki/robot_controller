<!DOCTYPE html>
<html>
<head>
    <title>Robot Control</title>
</head>
<body>
    <h1>River Cleaning Robot</h1>
    <button onclick="sendCommand('forward')">Forward</button>
    <button onclick="sendCommand('backward')">Backward</button>
    <button onclick="sendCommand('left')">Left</button>
    <button onclick="sendCommand('right')">Right</button>
    <button onclick="sendCommand('stop')">Stop</button>
    <br><br>
    <span>Distance: </span><span id="distance">0</span> cm

    <script src="https://unpkg.com/paho-mqtt/paho-mqtt-min.js"></script>
    <script>
        const client = new Paho.MQTT.Client(
            "b7b4dca2bf184e26ac21f9867678507d.s1.eu.hivemq.cloud",
            8884,
            "web_" + Math.random().toString(16).substr(2, 8)
        );

        client.connect({ 
            useSSL: true, 
            userName: "satish111",
            password: "Satish@12345",
            onSuccess: onConnect
        });

        function onConnect() {
            console.log("Connected to HiveMQ");
            client.subscribe("robot/sensors/ultrasonic");
        }

        client.onMessageArrived = function(message) {
            const data = JSON.parse(message.payloadString);
            document.getElementById("distance").innerText = data.ultrasonic;
        }

        function sendCommand(move) {
            const speed = "medium"; // or add buttons for low/high
            const message = new Paho.MQTT.Message(JSON.stringify({move, speed}));
            message.destinationName = "robot/command";
            client.send(message);
        }
    </script>
</body>
</html>
